<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://design.duolingo.com/86230c9ad10d9f08b785.svg" type="image/svg+xml">
    <title>Duolingo Product Discovery - Double Diamond Journey</title>
    <style>
        :root {
            /* Primitive Color Tokens */
            --color-white: rgba(255, 255, 255, 1);
            --color-black: rgba(0, 0, 0, 1);
            --color-cream-50: rgba(252, 252, 249, 1);
            --color-cream-100: rgba(255, 255, 253, 1);
            --color-gray-200: rgba(245, 245, 245, 1);
            --color-gray-300: rgba(167, 169, 169, 1);
            --color-gray-400: rgba(119, 124, 124, 1);
            --color-slate-500: rgba(98, 108, 113, 1);
            --color-brown-600: rgba(94, 82, 64, 1);
            --color-charcoal-700: rgba(31, 33, 33, 1);
            --color-charcoal-800: rgba(38, 40, 40, 1);
            --color-slate-900: rgba(19, 52, 59, 1);
            --color-teal-300: rgba(50, 184, 198, 1);
            --color-teal-400: rgba(45, 166, 178, 1);
            --color-teal-500: rgba(33, 128, 141, 1);
            --color-teal-600: rgba(29, 116, 128, 1);
            --color-teal-700: rgba(26, 104, 115, 1);
            --color-teal-800: rgba(41, 150, 161, 1);
            --color-red-400: rgba(255, 84, 89, 1);
            --color-red-500: rgba(192, 21, 47, 1);
            --color-orange-400: rgba(230, 129, 97, 1);
            --color-orange-500: rgba(168, 75, 47, 1);

            /* RGB versions for opacity control */
            --color-brown-600-rgb: 94, 82, 64;
            --color-teal-500-rgb: 33, 128, 141;
            --color-slate-900-rgb: 19, 52, 59;
            --color-slate-500-rgb: 98, 108, 113;
            --color-red-500-rgb: 192, 21, 47;
            --color-red-400-rgb: 255, 84, 89;
            --color-orange-500-rgb: 168, 75, 47;
            --color-orange-400-rgb: 230, 129, 97;

            /* Background color tokens (Light Mode) */
            --color-bg-1: rgba(59, 130, 246, 0.08); /* Light blue */
            --color-bg-2: rgba(245, 158, 11, 0.08); /* Light yellow */
            --color-bg-3: rgba(34, 197, 94, 0.08); /* Light green */
            --color-bg-4: rgba(239, 68, 68, 0.08); /* Light red */
            --color-bg-5: rgba(147, 51, 234, 0.08); /* Light purple */
            --color-bg-6: rgba(249, 115, 22, 0.08); /* Light orange */
            --color-bg-7: rgba(236, 72, 153, 0.08); /* Light pink */
            --color-bg-8: rgba(6, 182, 212, 0.08); /* Light cyan */

            /* Semantic Color Tokens (Light Mode) */
            --color-background: var(--color-cream-50);
            --color-surface: var(--color-cream-100);
            --color-text: var(--color-slate-900);
            --color-text-secondary: var(--color-slate-500);
            --color-primary: var(--color-teal-500);
            --color-primary-hover: var(--color-teal-600);
            --color-primary-active: var(--color-teal-700);
            --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
            --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
            --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
            --color-border: rgba(var(--color-brown-600-rgb), 0.2);
            --color-btn-primary-text: var(--color-cream-50);
            --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
            --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
            --color-error: var(--color-red-500);
            --color-success: var(--color-teal-500);
            --color-warning: var(--color-orange-500);
            --color-info: var(--color-slate-500);
            --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
            --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

            /* RGB versions for opacity control */
            --color-success-rgb: 33, 128, 141;
            --color-error-rgb: 192, 21, 47;
            --color-warning-rgb: 168, 75, 47;
            --color-info-rgb: 98, 108, 113;

            /* Typography */
            --font-family-base: "Nunito", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
            --font-size-xs: 11px;
            --font-size-sm: 12px;
            --font-size-base: 14px;
            --font-size-md: 14px;
            --font-size-lg: 16px;
            --font-size-xl: 18px;
            --font-size-2xl: 20px;
            --font-size-3xl: 24px;
            --font-size-4xl: 30px;
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 550;
            --font-weight-bold: 600;
            --line-height-tight: 1.2;
            --line-height-normal: 1.5;
            --letter-spacing-tight: -0.01em;

            /* Spacing */
            --space-0: 0;
            --space-1: 1px;
            --space-2: 2px;
            --space-4: 4px;
            --space-6: 6px;
            --space-8: 8px;
            --space-10: 10px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --space-32: 32px;

            /* Border Radius */
            --radius-sm: 6px;
            --radius-base: 8px;
            --radius-md: 10px;
            --radius-lg: 12px;
            --radius-full: 9999px;

            /* Shadows */
            --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
            --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.03);

            /* Animation */
            --duration-fast: 150ms;
            --duration-normal: 250ms;
            --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

            /* Layout */
            --container-sm: 640px;
            --container-md: 768px;
            --container-lg: 1024px;
            --container-xl: 1280px;

            /* Duolingo Specific Colors - GARANTIAS DE CONTRASTE */
            --duolingo-green: #58CC02;
            --duolingo-blue: #0F5F8C;
            --duolingo-blue-light: #1CB0F6;
            --duolingo-red: #FF4B4B;
            --duolingo-yellow: #FFC800;
            --duolingo-gold: #FFD700;
            --duolingo-purple: #CE82FF;
            --duolingo-orange: #FF9600;
            --duolingo-dark: #0F3460;
            --duolingo-text-main: #2B2B2B;
            --duolingo-text-secondary: #4A4A4A;
            --duolingo-text-accent: #1A7A3E;
            --duolingo-text-link: #0F5F8C;
            --duolingo-text-success: #0D6E2E;
            --duolingo-light-green: #89E219;
            --duolingo-bg: #F7F7F7;
            --duolingo-white: #FFFFFF;
            --duolingo-gray: #4A4A4A;
            --duolingo-dark-gray: #2B2B2B;
            
            /* Regras de Contraste Obrigat√≥rias */
            /* Fundo Verde: SEMPRE texto branco */
            /* Fundo Amarelo: SEMPRE texto preto */
            /* Fundo Azul: SEMPRE texto branco */
            /* Fundo Branco: texto preto */
            /* Fundo Escuro: texto branco */
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-gray-400-rgb: 119, 124, 124;
                --color-teal-300-rgb: 50, 184, 198;
                --color-gray-300-rgb: 167, 169, 169;
                --color-gray-200-rgb: 245, 245, 245;

                --color-bg-1: rgba(29, 78, 216, 0.15);
                --color-bg-2: rgba(180, 83, 9, 0.15);
                --color-bg-3: rgba(21, 128, 61, 0.15);
                --color-bg-4: rgba(185, 28, 28, 0.15);
                --color-bg-5: rgba(107, 33, 168, 0.15);
                --color-bg-6: rgba(194, 65, 12, 0.15);
                --color-bg-7: rgba(190, 24, 93, 0.15);
                --color-bg-8: rgba(8, 145, 178, 0.15);

                --color-background: var(--color-charcoal-700);
                --color-surface: var(--color-charcoal-800);
                --color-text: var(--color-gray-200);
                --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
                --color-primary: var(--color-teal-300);
                --color-primary-hover: var(--color-teal-400);
                --color-primary-active: var(--color-teal-800);
                --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
                --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
                --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
                --color-border: rgba(var(--color-gray-400-rgb), 0.3);
                --color-error: var(--color-red-400);
                --color-success: var(--color-teal-300);
                --color-warning: var(--color-orange-400);
                --color-info: var(--color-gray-300);
                --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
                --color-btn-primary-text: var(--color-slate-900);
                --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
                --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
                --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

                --color-success-rgb: var(--color-teal-300-rgb);
                --color-error-rgb: var(--color-red-400-rgb);
                --color-warning-rgb: var(--color-orange-400-rgb);
                --color-info-rgb: var(--color-gray-300-rgb);
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: var(--font-size-base);
            font-family: var(--font-family-base);
            line-height: var(--line-height-normal);
            color: var(--color-text);
            background-color: var(--color-background);
            -webkit-font-smoothing: antialiased;
            scroll-behavior: smooth;
            scroll-padding-top: 140px; /* height of header + nav + extra space */
        }

        body {
            margin: 0;
            padding: 0;
            font-family: var(--font-family-base);
            line-height: 1.6;
            color: var(--duolingo-text-main);
            background-color: var(--duolingo-bg);
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Fixo */
        .header {
            background: linear-gradient(135deg, var(--duolingo-green), var(--duolingo-light-green));
            color: white;
            padding: 1rem 0;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: var(--shadow-md);
            height: 70px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-left {
            display: flex;
            align-items: center;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 1.8rem;
            font-weight: 800;
            text-decoration: none;
            color: white;
        }

        .owl-icon {
            width: 40px;
            height: 40px;
            background: var(--duolingo-yellow);
            border-radius: 50%;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Navigation Header */
        .secondary-header {
            position: fixed;
            top: 70px; /* Below main header */
            left: 0;
            right: 0;
            background: var(--bg-primary);
            z-index: 998;
            box-shadow: var(--shadow-sm);
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid var(--border-color);
            transition: top 0.3s ease-in-out;
        }

        .nav-links {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0 1rem;
            gap: 1.5rem;
            overflow-x: auto;
            scrollbar-width: none; /* Firefox */
        }
        .nav-links::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .nav-links li a {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 700;
            font-size: 0.9rem;
            padding: 0.5rem 0;
            position: relative;
            white-space: nowrap;
            transition: color 0.3s;
        }

        .nav-links li a:hover {
            color: var(--text-primary);
        }

        .nav-links li a.active {
            color: var(--duolingo-green);
        }

        .nav-links li a.active::after {
            content: '';
            position: absolute;
            bottom: -16px;
            left: 0;
            right: 0;
            height: 4px;
            background-color: var(--duolingo-green);
            border-radius: 2px;
        }
        
        .nav-overlay {
            display: none; /* Hidden on desktop */
        }

        /* Hamburger Menu for Mobile */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: var(--duolingo-white);
            z-index: 1000;
            padding: 0;
            margin-right: 1rem;
        }

        /* Bot√£o de Tema - SEMPRE VIS√çVEL */
        .theme-toggle-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 3px solid var(--duolingo-green);
            background: var(--duolingo-white);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 10px;
            transition: all 0.3s ease;
            font-size: 22px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            z-index: 1002;
        }
        
        .theme-toggle-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(88, 204, 2, 0.3);
        }
        
        .theme-icon {
            line-height: 1;
            display: block;
        }
        
        /* Sistema de Temas - CORRE√á√ÉO COMPLETA DE CONTRASTE */
        :root {
            /* Vari√°veis de tema padr√£o (claro) - ESCURECIDAS */
            --bg-primary: #FFFFFF;
            --bg-secondary: #F7F7F7;
            --bg-card: #FFFFFF;
            --text-primary: #2B2B2B; 
            --text-secondary: #4A4A4A;
            --text-muted: #5A5A5A; 
            --border-color: #E0E0E0;
            --text-on-dark: #FFFFFF;
        }
        
        [data-theme="dark"] {
            /* Background */
            --bg-primary: #1A1A1A;
            --bg-secondary: #2A2A2A;
            --bg-card: #2F2F2F;
            
            /* Text */
            --text-primary: #FFFFFF;
            --text-secondary: #c9c9c9;
            --text-muted: #B0B0B0;
            --text-on-dark: #FFFFFF;
            
            /* Borders */
            --border-color: #404040;
        }
        
        /* Aplicar vari√°veis de tema */
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s, color 0.3s;
        }
        
        /* T√≠tulos de se√ß√£o */
        h1, h2, h3, h4 {
            color: var(--text-primary);
        }
        
        /* Corrigindo par√°grafos secund√°rios */
        .section-description, p[style*="--color-text-secondary"], .dd-summary, .competitor-metric-label,
        .timeline-content .section-description, .prototype-card .section-description, .competitor-card .section-description,
        .dd-details p, .dd-details li, .timeline-details p, .intro-subtitle {
            color: var(--text-secondary);
        }
        
        p, li {
            color: var(--text-primary);
        }
        
        .timeline-details li, .dd-details li {
             color: var(--text-secondary);
        }


        /* Cards gerais */
        .gamification-intro,
        .timeline-section,
        .diamond-phases,
        .prototypes,
        .competitors,
        .sources-section,
        .double-diamond-intro,
        .intro-section {
            background: var(--bg-secondary);
        }
        
        .timeline-content,
        .phase-card,
        .prototype-card,
        .competitor-card,
        .source-card,
        .card,
        .dd-card {
            background: var(--bg-card);
            border-color: var(--border-color);
        }

        .timeline-details, .phase-body .more-details-content, .prototype-expanded, .competitor-expanded, .dd-details {
             background: var(--bg-secondary);
        }
        
        /* Toast com tema adaptativo */
        .toast-notification {
            background: var(--bg-card);
        }
        
        .toast-title {
            color: var(--duolingo-green);
        }
        
        .toast-message {
            color: var(--text-secondary);
        }

        /* Contador de XP Fixo */
        .xp-counter {
            position: fixed;
            top: 80px;
            right: 20px;
            background: var(--duolingo-yellow);
            color: var(--duolingo-text-main);
            padding: 0.8rem 1.2rem;
            border-radius: 25px;
            font-weight: 800;
            z-index: 1001;
            box-shadow: var(--shadow-md);
            font-size: 1rem;
            min-width: 160px;
            text-align: center;
            border: 3px solid var(--duolingo-green);
        }

        /* Barra de Progresso de Leitura */
        .reading-progress-bar {
            position: fixed;
            top: 70px;
            left: 0;
            width: 100%;
            height: 5px;
            background: rgba(0, 0, 0, 0.1);
            z-index: 1001; /* Acima do header */
        }

        .reading-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #58CC02 0%, #1CB0F6 50%, #FFC800 75%, #FF4B4B 100%);
            width: 0%;
            transition: width 0.2s ease-out;
        }

        [data-theme="dark"] .reading-progress-bar {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Main Content */
        .main {
            margin-top: 140px; /* 70px header + 50px nav + 20px space */
            padding-top: 2rem;
        }

        /* Nova Se√ß√£o de Introdu√ß√£o */
        .intro-section {
            padding: 5rem 0;
            text-align: center;
        }
        .intro-title {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 1rem;
        }
        .intro-subtitle {
            font-size: 1.5rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.4;
        }

        /* Se√ß√£o de Gamifica√ß√£o */
        .gamification-intro {
            padding: 4rem 0;
            border-bottom: 4px solid var(--duolingo-green);
            margin-bottom: 2rem;
        }

        .gamification-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .gamification-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 2rem;
        }

        /* Card de Gamifica√ß√£o - CONTRASTE CORRIGIDO */
        .gamification-box {
            background: linear-gradient(135deg, #58CC02, #4CAF00);
            padding: 2rem;
            border-radius: var(--radius-lg);
            color: #FFFFFF !important; /* BRANCO SEMPRE em fundo verde */
            margin-bottom: 2rem;
            text-align: left;
            position: relative;
        }
        
        .gamification-box h3,
        .gamification-box p,
        .gamification-box li,
        .gamification-box strong {
            color: #FFFFFF !important;
        }
        
        .gamification-box h3 {
            font-weight: 700;
        }
        
        .gamification-box p {
            line-height: 1.6;
        }
        
        .gamification-box li {
            font-weight: 600;
        }
        
        .gamification-box strong {
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Bot√£o "EXPERIMENTE CLICAR AQUI" - CONTRASTE CORRIGIDO */
        .first-click-btn {
            background: #FFD700 !important; /* Amarelo ouro */
            color: #2B2B2B !important; /* PRETO para contraste */
            border: none;
            padding: 20px 40px;
            font-size: 24px;
            font-weight: 900;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            text-transform: uppercase;
        }

        .first-click-btn:hover {
            transform: scale(1.05);
            background: #FFC800 !important;
            box-shadow: 0 12px 30px rgba(255, 199, 0, 0.5);
        }

        /* Timeline */
        .timeline-section {
            padding: 4rem 0;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 800;
            text-align: center;
            margin-bottom: 2rem;
        }

        .timeline {
            position: relative;
            max-width: 1000px;
            margin: 0 auto;
        }

        .timeline::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, var(--duolingo-green), var(--duolingo-blue), var(--duolingo-purple), var(--duolingo-yellow));
            border-radius: 2px;
        }

        .timeline-item {
            position: relative;
            margin: 3rem 0;
            opacity: 0;
            transform: translateY(50px);
            animation: fadeInUp 0.6s ease forwards;
        }

        .timeline-item:nth-child(odd) {
            text-align: right;
            padding-right: calc(50% + 5rem);
        }

        .timeline-item:nth-child(even) {
            text-align: left;
            padding-left: calc(50% + 5rem);
        }

        .timeline-year {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: var(--duolingo-green);
            color: white;
            min-width: 80px;
            min-height: 80px;
            max-width: 120px;
            max-height: 120px;
            width: fit-content;
            height: fit-content;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.1rem;
            left: 50%;
            transform: translateX(-50%) translateY(-50%);
            z-index: 10;
            box-shadow: 0 0 0 4px white, var(--shadow-md);
            padding: 10px;
            text-align: center;
            line-height: 1.2;
        }

        .phase-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 1rem;
        }

        .phase-discover { background: var(--duolingo-text-link); color: white; }
        .phase-define { background: var(--duolingo-text-accent); color: white; }
        .phase-develop { background: var(--duolingo-yellow); color: var(--duolingo-text-main); }
        .phase-deliver { background: var(--duolingo-purple); color: white; }

        /* Diamond Phases */
        .diamond-phases {
            padding: 4rem 0;
        }

        .phases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .phase-card {
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            border: 3px solid transparent;
            background: var(--bg-card);
            display: flex; /* Garante que os cards se alinhem */
            flex-direction: column; /* Organiza o conte√∫do do card verticalmente */
        }
        
        .phase-card.phase-discover { border-color: #1CB0F6; }
        .phase-card.phase-define { border-color: #58CC02; }
        .phase-card.phase-develop { border-color: #FFC800; }
        .phase-card.phase-deliver { border-color: var(--duolingo-purple); }

        .phase-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .phase-header {
            padding: 2rem;
            color: white;
            text-align: center;
            border-radius: 6px 6px 0 0;
        }

        .phase-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .phase-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            color: white !important;
        }

        .phase-body {
            padding: 2rem;
            background: var(--bg-card);
            display: flex;
            flex-direction: column;
            flex-grow: 1; /* Faz o corpo do card crescer */
        }

        /* Prot√≥tipos */
        .prototypes {
            padding: 4rem 0;
        }

        .prototypes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .prototype-card {
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .prototype-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        /* Competidores */
        .competitors {
            padding: 4rem 0;
        }

        .competitors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .competitor-card {
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .competitor-card:hover {
            border-color: var(--duolingo-text-link);
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .competitor-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            margin: 0 auto 1rem;
            display: block;
            object-fit: cover;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* M√©tricas */
        .metrics {
            padding: 4rem 0;
            background: linear-gradient(135deg, var(--duolingo-dark), var(--duolingo-purple));
            color: white;
        }
        
        .metrics .section-title, .metrics .metrics-title {
             color: white !important;
        }

        .metrics-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            margin-top: 3rem;
        }

        .metrics-column {
            text-align: center;
        }

        .metrics-title {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 2rem;
        }

        .metric-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: var(--radius-lg);
            margin-bottom: 1rem;
        }
        
        .metric-item * {
            color: white !important;
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--duolingo-yellow) !important;
            margin-bottom: 0.5rem;
        }

        .metric-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        /* Sources Section */
        .sources-section {
            padding: 4rem 0;
        }

        .sources-filters {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }

        .filter-btn {
            background: var(--bg-card);
            border: 2px solid var(--duolingo-green);
            color: var(--text-primary);
            padding: 10px 24px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn:hover {
            border-color: var(--duolingo-green);
            background: var(--bg-secondary);
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: var(--duolingo-green);
            border-color: var(--duolingo-green);
            color: white !important;
        }

        .sources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .source-card {
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            border-left: 4px solid var(--duolingo-green);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        /* Bot√µes */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-8) var(--space-16);
            border-radius: var(--radius-base);
            font-size: var(--font-size-base);
            font-weight: 500;
            line-height: 1.5;
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease-standard);
            border: none;
            text-decoration: none;
        }

        .btn--primary {
            background: var(--duolingo-green);
            color: white !important;
        }

        .btn--primary:hover {
            background: var(--duolingo-text-success);
            transform: translateY(-2px);
        }

        /* Sistema de Toast Melhorado - Sem Sobreposi√ß√£o */
        .toast-notification {
            position: fixed;
            right: 20px;
            border: 3px solid var(--duolingo-green);
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
            padding: 16px 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 280px;
            max-width: 400px;
            z-index: 9999;
            transform: translateX(400px);
            opacity: 0;
            transition: all 0.3s ease-out;
        }

        .toast-notification.show {
            transform: translateX(0);
            opacity: 1;
        }

        .toast-notification.hide {
            animation: slideOutRight 0.3s ease-in;
            transform: translateX(400px);
            opacity: 0;
        }

        .toast-icon {
            font-size: 24px;
            flex-shrink: 0;
        }

        .toast-content {
            flex: 1;
        }
        
        .toast-message {
            font-size: 14px;
            line-height: 1.3;
        }

        .toast-progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: #E5E5E5;
            border-radius: 0 0 16px 16px;
            overflow: hidden;
        }

        .toast-progress-fill {
            height: 100%;
            background: var(--duolingo-green);
            animation: progressBar 3s linear;
            width: 100%;
        }

        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: var(--duolingo-green);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            z-index: 1002;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
        }

        .back-to-top.show {
            display: flex;
            opacity: 1;
        }

        .back-to-top:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.25);
            background: var(--duolingo-text-success);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }

        @keyframes progressBar {
            from { width: 100%; }
            to { width: 0%; }
        }
        
        /* Modal de Conquista 100% */
        .victory-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 10000;
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        
        .victory-overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
        }
        
        .victory-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--bg-card);
            border: 5px solid #58CC02;
            border-radius: 30px;
            padding: 60px 40px;
            max-width: 600px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: scaleIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .victory-icon {
            font-size: 120px;
            animation: bounce 1s infinite;
        }
        
        .victory-title {
            font-size: 48px;
            font-weight: 900;
            color: #58CC02;
            margin: 20px 0;
            text-transform: uppercase;
        }
        
        .victory-message {
            font-size: 20px;
            color: var(--text-primary);
            line-height: 1.6;
            margin: 20px 0;
        }
        
        .victory-button {
            background: linear-gradient(135deg, #58CC02, #4CAF00);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 20px 60px;
            font-size: 24px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 30px;
            box-shadow: 0 8px 20px rgba(88, 204, 2, 0.4);
            transition: all 0.3s;
        }
        
        .victory-button:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 30px rgba(88, 204, 2, 0.6);
        }
        
        /* Confetes */
        .confetti-container {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            top: -10px;
            animation: confettiFall linear infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes scaleIn {
            0% {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 0;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        @keyframes confettiFall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main {
                margin-top: 70px; /* Only main header is fixed */
            }

            .header-right {
                gap: 1rem;
            }

            .secondary-header {
                top: 0;
                left: -100%; /* Hide by default */
                width: 80%;
                max-width: 300px;
                height: 100vh;
                flex-direction: column;
                justify-content: flex-start;
                align-items: flex-start;
                padding: 8rem 2rem 2rem 2rem;
                background: var(--bg-card);
                border-right: 1px solid var(--border-color);
                border-bottom: none;
                transition: left 0.3s ease-in-out;
            }

            .secondary-header.open {
                left: 0;
            }
            
            .nav-overlay {
                display: block;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                z-index: 997;
                opacity: 0;
                visibility: hidden;
                transition: opacity 0.3s, visibility 0.3s;
            }

            .nav-overlay.open {
                opacity: 1;
                visibility: visible;
            }

            body.menu-open {
                overflow: hidden;
            }

            .nav-links {
                flex-direction: column;
                align-items: flex-start;
                gap: 1.5rem;
                width: 100%;
                overflow: visible;
            }

            .nav-links li a.active::after {
                display: none; /* No underline on mobile */
            }
            
            .nav-links li a {
                font-size: 1.2rem;
            }

            .mobile-menu-toggle {
                display: block;
            }

            .xp-counter {
                top: 85px;
                right: 10px;
                font-size: 0.9rem;
                padding: 0.6rem 1rem;
                min-width: 120px;
            }
            
            .timeline::before {
                left: 20px;
            }

            .timeline-item {
                padding-left: 4rem !important;
                padding-right: 1rem !important;
                text-align: left !important;
            }

            .timeline-year {
                left: 20px !important;
                margin-left: -30px;
            }

            .metrics-comparison {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .sources-filters {
                flex-direction: column;
                align-items: center;
                gap: 0.5rem;
            }

            .sources-grid {
                grid-template-columns: 1fr;
            }

            .toast-notification {
                right: 10px;
                left: 10px;
                max-width: calc(100vw - 20px);
                min-width: auto;
            }
            
            .victory-content {
                margin: 0 20px;
                padding: 40px 30px;
                max-width: calc(100vw - 40px);
            }
            
            .victory-title {
                font-size: 36px;
            }
            
            .victory-message {
                font-size: 18px;
            }
            
            .victory-button {
                padding: 15px 40px;
                font-size: 20px;
            }

            .back-to-top {
                width: 50px;
                height: 50px;
                bottom: 20px;
                right: 20px;
                font-size: 1.2rem;
            }
        }

        /* Double Diamond Intro Cards */
        .double-diamond-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .dd-card {
            border: 2px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.3s;
            display: flex;
            flex-direction: column;
        }

        .dd-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .dd-card-header {
            padding: 30px 20px;
            text-align: center;
            color: #FFFFFF;
        }

        .dd-card-header h3 {
            color: #FFFFFF !important;
            font-size: 24px;
            font-weight: 700;
            margin: 10px 0 0 0;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        /* Exce√ß√£o para fundo amarelo - texto preto */
        .dd-card-header[style*="#FFC800"] h3 {
            color: #2B2B2B !important;
            text-shadow: none;
        }

        .dd-icon {
            font-size: 48px;
            display: block;
            margin-bottom: 10px;
            color: white !important;
        }
        
        [data-theme="dark"] .dd-icon {
            color: white !important;
        }
        
        .dd-card-header[style*="#FFC800"] .dd-icon {
            color: #2B2B2B !important;
        }


        .dd-card-body {
            padding: 30px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .dd-learn-btn {
            background: #58CC02;
            color: #FFFFFF !important;
            border: none;
            border-radius: 25px;
            padding: 15px 30px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            margin-top: auto; /* Pushes button to the bottom */
        }

        .dd-learn-btn:hover {
            background: #4CAF00;
            transform: scale(1.02);
        }

        .dd-details {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid var(--border-color);
        }

        .dd-details ul {
            margin: 10px 0;
            padding-left: 25px;
        }

        /* CORRE√á√ïES CR√çTICAS DE CONTRASTE - TEMA CLARO */
        .timeline-content,
        .prototype-card,
        .competitor-card,
        .source-card {
            padding: 2rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            position: relative;
            transition: all 0.3s ease;
        }
        
        .timeline-content:hover,
        .prototype-card:hover,
        .competitor-card:hover,
        .source-card:hover {
             transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        /* Corrigindo cor de fonte nos detalhes */
        .timeline-details p, .timeline-details h4,
        .more-details-content p, .more-details-content h4, .more-details-content li,
        .prototype-expanded p, .prototype-expanded h4,
        .competitor-expanded p, .competitor-expanded h4,
        .dd-details p, .dd-details h4, .dd-details li {
            color: var(--text-primary);
        }
        
        .more-details-content p, .prototype-expanded p, .competitor-expanded p, .dd-details p {
             color: var(--text-secondary);
        }


        .competitor-expanded [style*="--text-secondary"] {
             color: var(--text-secondary) !important;
        }


        /* Section class for intersection observer */
        .section {
            scroll-margin-top: 100px;
        }

        /* Rodap√© com Cr√©ditos */
        .app-footer {
            background: var(--bg-secondary);
            border-top: 3px solid #58CC02;
            padding: 40px 20px;
            text-align: center;
            margin-top: 60px;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-line {
            font-size: 18px;
            margin: 12px 0;
            line-height: 1.6;
        }

        .footer-line strong {
            color: var(--duolingo-green);
            font-weight: 700;
        }

        [data-theme="dark"] .footer-line strong {
            color: var(--duolingo-green); /* Verde mant√©m em ambos os temas */
        }

        .double-diamond-image-container {
            max-width: 900px;
            margin: 2rem auto;
            text-align: center;
        }
        .double-diamond-image-container img {
            max-width: 100%;
            height: auto;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
        }
        .image-caption {
            margin-top: 1rem;
            font-size: 0.9rem;
            color: var(--text-muted);
        }
        .image-source {
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        .image-source a {
            color: var(--duolingo-text-link);
        }
        
        /* Utility classes */
        .text-center { text-align: center; }
        .mb-2 { margin-bottom: 2rem; }
        .mt-2 { margin-top: 2rem; }
        .hidden { display: none; }
        .show { display: block !important; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Barra de Progresso de Leitura -->
    <div class="reading-progress-bar">
        <div class="reading-progress-fill" id="reading-progress"></div>
    </div>

    <!-- Contador de XP -->
    <div class="xp-counter" id="xpCounter">
        üèÜ <span id="xpValue">0</span> / 237 XP
        <div style="font-size: 0.7rem; opacity: 0.8; margin-top: 2px;">
            <span id="xpProgress">0%</span> Completo
        </div>
        <div style="width: 100%; height: 4px; background: rgba(255,255,255,0.3); border-radius: 2px; margin-top: 4px; overflow: hidden;">
            <div id="xpProgressBar" style="height: 100%; background: white; width: 0%; transition: width 0.3s ease; border-radius: 2px;"></div>
        </div>
    </div>

    <!-- Header Fixo -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="header-left">
                    <a href="#" class="logo">
                        <div class="owl-icon"><img src="https://design.duolingo.com/86230c9ad10d9f08b785.svg" alt="√çcone do Duolingo" style="width: 28px; height: auto;"></div>
                        Duolingo Discovery
                    </a>
                </div>
                
                <div class="header-right">
                <!-- Mobile Menu Toggle -->
                <button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-label="Abrir menu">‚ò∞</button>
                <!-- Bot√£o de Tema (vis√≠vel em desktop) -->
                <button id="theme-toggle" class="theme-toggle-btn" aria-label="Alternar tema">
                    <span class="theme-icon" id="theme-icon">üåô</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Secondary Navigation Header -->
    <nav class="secondary-header" id="secondary-header">
        <ul class="nav-links" id="nav-links">
            <li><a href="#intro">Introdu√ß√£o</a></li>
            <li><a href="#gamification">Gamifica√ß√£o</a></li>
            <li><a href="#double-diamond-intro">Double Diamond</a></li>
            <li><a href="#timeline">Timeline</a></li>
            <li><a href="#diamond">Fases</a></li>
            <li><a href="#prototypes">Prot√≥tipos</a></li>
            <li><a href="#competitors">Competidores</a></li>
            <li><a href="#metrics">M√©tricas</a></li>
            <li><a href="#sources">Fontes</a></li>
        </ul>
    </nav>

    <!-- Mobile Nav Overlay -->
    <div class="nav-overlay" id="nav-overlay"></div>

    <!-- Main Content -->
    <main class="main">
        <!-- 0. Se√ß√£o de Introdu√ß√£o -->
        <section class="intro-section section" id="intro">
            <div class="container">
                <img src="https://design.duolingo.com/86230c9ad10d9f08b785.svg" alt="√çcone do Duolingo" style="width: 80px; height: auto; margin-bottom: 1.5rem;">
                <h1 class="intro-title">Duolingo sob o Double Diamond</h1>
                <p class="intro-subtitle">Ol√°! Prepare-se para uma jornada interativa pela hist√≥ria de cria√ß√£o do Duolingo, vista atrav√©s da poderosa metodologia Double Diamond.</p>
            </div>
        </section>

        <!-- 1. Se√ß√£o de Gamifica√ß√£o Inicial -->
        <section class="gamification-intro section" id="gamification">
            <div class="container">
                <div class="gamification-content">
                    <h2 class="gamification-title">üéÆ Como Funciona Esta Experi√™ncia Gamificada</h2>
                    
                    <div class="gamification-box">
                        <p style="font-size: 1.2rem; margin-bottom: 1.5rem;">Inspirado no pr√≥prio Duolingo, esta jornada interativa recompensa sua explora√ß√£o com XP (Experience Points)!</p>
                        
                        <h3 style="margin-bottom: 1rem; font-size: 1.3rem;">Como ganhar XP:</h3>
                        <ul style="list-style: none; padding: 0; margin: 0;">
                            <li style="margin-bottom: 0.8rem; padding-left: 2rem;">üéØ <strong>Clique em bot√µes especiais:</strong> +10 XP</li>
                            <li style="margin-bottom: 0.8rem; padding-left: 2rem;">üìñ <strong>Leia detalhes expandidos:</strong> +5 XP</li>
                            <li style="margin-bottom: 0.8rem; padding-left: 2rem;">üîç <strong>Explore prot√≥tipos:</strong> +15 XP</li>
                            <li style="margin-bottom: 0.8rem; padding-left: 2rem;">üìö <strong>Acesse fontes e refer√™ncias:</strong> +5 XP</li>
                        </ul>
                        
                        <p style="font-size: 1.1rem; margin-top: 1.5rem; opacity: 0.9;">Seu progresso √© salvo durante toda a navega√ß√£o. Quanto mais voc√™ explora, mais XP acumula! <strong>Ser√° que voc√™ consegue 100% de XP? üëÄ</strong></p>
                    </div>
                    
                    <button id="firstClickBtn" class="first-click-btn">
                        ‚ö° EXPERIMENTE CLICAR AQUI ‚ö°
                    </button>
                </div>
            </div>
        </section>

        <!-- 2. O Que √© Double Diamond? -->
        <section class="double-diamond-intro section" id="double-diamond-intro">
            <div class="container">
                <h2 class="section-title">üíé O Que √© Double Diamond?</h2>
                
                <p class="section-description" style="text-align: center; font-size: 1.2rem; max-width: 800px; margin: 0 auto 3rem;">
                    O Double Diamond √© uma metodologia de design thinking criada pelo British Design Council em 2005. 
                    Representa o processo criativo dividido em quatro fases distintas, garantindo que problemas sejam 
                    explorados antes de solu√ß√µes serem criadas.
                </p>

                <!-- IMAGEM EXPLICATIVA DO DOUBLE DIAMOND -->
                <div class="double-diamond-image-container">
                    <img src="https://htmlburger.com/blog/wp-content/uploads/2022/07/How-Does-the-Double-Diamond-Design-Process-Work-Full-Infographic-1024x733.jpg"
                         alt="Diagrama explicativo da metodologia Double Diamond"
                         loading="lazy">
                    <p class="image-caption">
                        Diagrama da metodologia Double Diamond: Descobrir, Definir, Desenvolver e Entregar
                    </p>
                    <p class="image-source">
                        Fonte: <a href="https://htmlburger.com/blog/double-diamond-design-process/" target="_blank" rel="noopener noreferrer">HTML Burger - Double Diamond Design Process</a>
                    </p>
                </div>
                
                <div class="double-diamond-cards">
                    <!-- Card 1: Descobrir -->
                    <div class="dd-card">
                        <div class="dd-card-header" style="background: #1CB0F6;">
                            <span class="dd-icon">üîç</span>
                            <h3>Descobrir</h3>
                        </div>
                        <div class="dd-card-body">
                            <div style="flex-grow: 1;">
                                <p class="dd-summary">
                                    Fase divergente de explora√ß√£o do problema atrav√©s de pesquisa e insights.
                                </p>
                            </div>
                            <button class="dd-learn-btn" onclick="toggleDDDetails('discover')">
                                üìñ APRENDER MAIS (+10 XP)
                            </button>
                            <div class="dd-details hidden" id="dd-discover">
                                <h4>Objetivo:</h4>
                                <p>Entender profundamente o problema real dos usu√°rios atrav√©s de pesquisa emp√°tica.</p>
                                
                                <h4>Atividades T√≠picas:</h4>
                                <ul>
                                    <li>Entrevistas com usu√°rios</li>
                                    <li>Observa√ß√£o contextual</li>
                                    <li>An√°lise de concorrentes</li>
                                    <li>Desk research</li>
                                    <li>Surveys e question√°rios</li>
                                </ul>
                                
                                <h4>Resultado:</h4>
                                <p>Grande volume de insights e dados qualitativos sobre necessidades dos usu√°rios.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Card 2: Definir -->
                    <div class="dd-card">
                        <div class="dd-card-header" style="background: #58CC02;">
                            <span class="dd-icon">üéØ</span>
                            <h3>Definir</h3>
                        </div>
                        <div class="dd-card-body">
                            <div style="flex-grow: 1;">
                                <p class="dd-summary">
                                    Fase convergente de s√≠ntese e defini√ß√£o clara do problema a resolver.
                                </p>
                            </div>
                            <button class="dd-learn-btn" onclick="toggleDDDetails('define')">
                                üìñ APRENDER MAIS (+10 XP)
                            </button>
                            <div class="dd-details hidden" id="dd-define">
                                <h4>Objetivo:</h4>
                                <p>Sintetizar insights em uma declara√ß√£o clara e acion√°vel do problema.</p>
                                
                                <h4>Atividades T√≠picas:</h4>
                                <ul>
                                    <li>Affinity mapping</li>
                                    <li>Personas de usu√°rios</li>
                                    <li>User journey maps</li>
                                    <li>Problem statements</li>
                                    <li>How Might We questions</li>
                                </ul>
                                
                                <h4>Resultado:</h4>
                                <p>Defini√ß√£o precisa do problema priorit√°rio a ser resolvido.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Card 3: Desenvolver -->
                    <div class="dd-card">
                        <div class="dd-card-header" style="background: #FFC800;">
                            <span class="dd-icon">üí°</span>
                            <h3>Desenvolver</h3>
                        </div>
                        <div class="dd-card-body">
                            <div style="flex-grow: 1;">
                                <p class="dd-summary">
                                    Fase divergente de idea√ß√£o e prototipa√ß√£o de m√∫ltiplas solu√ß√µes.
                                </p>
                            </div>
                            <button class="dd-learn-btn" onclick="toggleDDDetails('develop')">
                                üìñ APRENDER MAIS (+10 XP)
                            </button>
                            <div class="dd-details hidden" id="dd-develop">
                                <h4>Objetivo:</h4>
                                <p>Gerar o m√°ximo de ideias poss√≠veis e testar rapidamente atrav√©s de prot√≥tipos.</p>
                                
                                <h4>Atividades T√≠picas:</h4>
                                <ul>
                                    <li>Brainstorming sessions</li>
                                    <li>Sketching e wireframing</li>
                                    <li>Prototipa√ß√£o r√°pida</li>
                                    <li>User testing</li>
                                    <li>Itera√ß√£o baseada em feedback</li>
                                </ul>
                                
                                <h4>Resultado:</h4>
                                <p>Prot√≥tipos validados e refinados atrav√©s de testes com usu√°rios reais.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Card 4: Entregar -->
                    <div class="dd-card">
                        <div class="dd-card-header" style="background: var(--duolingo-purple);">
                            <span class="dd-icon">üöÄ</span>
                            <h3>Entregar</h3>
                        </div>
                        <div class="dd-card-body">
                            <div style="flex-grow: 1;">
                                <p class="dd-summary">
                                    Fase convergente de implementa√ß√£o e lan√ßamento da solu√ß√£o validada.
                                </p>
                            </div>
                            <button class="dd-learn-btn" onclick="toggleDDDetails('deliver')">
                                üìñ APRENDER MAIS (+10 XP)
                            </button>
                            <div class="dd-details hidden" id="dd-deliver">
                                <h4>Objetivo:</h4>
                                <p>Implementar a solu√ß√£o escolhida e monitorar seu desempenho no mundo real.</p>
                                
                                <h4>Atividades T√≠picas:</h4>
                                <ul>
                                    <li>Desenvolvimento final</li>
                                    <li>Beta testing</li>
                                    <li>Lan√ßamento gradual</li>
                                    <li>Monitoramento de m√©tricas</li>
                                    <li>Itera√ß√£o cont√≠nua</li>
                                </ul>
                                
                                <h4>Resultado:</h4>
                                <p>Produto lan√ßado no mercado com processo de melhoria cont√≠nua estabelecido.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. Timeline da Jornada (2009-2012) -->
        <section class="timeline-section section" id="timeline">
            <div class="container">
                <h2 class="section-title">Timeline da Jornada (2009-2012)</h2>
                <div class="timeline" id="timelineContainer">
                    <!-- Timeline items ser√£o gerados pelo JavaScript -->
                </div>
            </div>
        </section>

        <!-- 4. Fases do Double Diamond -->
        <section class="diamond-phases section" id="diamond">
            <div class="container">
                <h2 class="section-title">Fases do Double Diamond no Duolingo</h2>
                <div class="phases-grid" id="phasesGrid">
                    <!-- Phase cards ser√£o gerados pelo JavaScript -->
                </div>
            </div>
        </section>

        <!-- 5. Evolu√ß√£o dos Prot√≥tipos -->
        <section class="prototypes section" id="prototypes">
            <div class="container">
                <h2 class="section-title">Evolu√ß√£o dos Prot√≥tipos</h2>
                <p class="text-center section-description" style="font-size: 1.2rem; max-width: 800px; margin: 0 auto 2rem;">O Duolingo passou por m√∫ltiplas itera√ß√µes antes de chegar ao produto que conhecemos hoje.</p>
                <div class="prototypes-grid" id="prototypesGrid">
                    <!-- Prototype cards ser√£o gerados pelo JavaScript -->
                </div>
            </div>
        </section>

        <!-- 6. Cen√°rio Competitivo em 2011 -->
        <section class="competitors section" id="competitors">
            <div class="container">
                <h2 class="section-title">Cen√°rio Competitivo em 2011</h2>
                <p class="text-center section-description" style="font-size: 1.2rem; max-width: 800px; margin: 0 auto 2rem;">Quando o Duolingo estava sendo desenvolvido, o mercado de aprendizado de idiomas j√° tinha players estabelecidos.</p>
                <div class="competitors-grid" id="competitorsGrid">
                    <!-- Competitor cards ser√£o gerados pelo JavaScript -->
                </div>
            </div>
        </section>

        <!-- 7. M√©tricas de Sucesso -->
        <section class="metrics section" id="metrics">
            <div class="container">
                <h2 class="section-title">Evolu√ß√£o das M√©tricas</h2>
                <div class="metrics-comparison">
                    <div class="metrics-column">
                        <div class="metrics-title">2012 - Lan√ßamento</div>
                        <div class="metric-item">
                            <div class="metric-value">300K</div>
                            <div class="metric-label">Lista de Espera</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">6</div>
                            <div class="metric-label">Idiomas</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">Freemium</div>
                            <div class="metric-label">Modelo de Neg√≥cio</div>
                        </div>
                    </div>
                    <div class="metrics-column">
                        <div class="metrics-title">2024 - Atual</div>
                        <div class="metric-item">
                            <div class="metric-value">128M</div>
                            <div class="metric-label">Usu√°rios Ativos Mensais</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">40+</div>
                            <div class="metric-label">Idiomas</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">$748M</div>
                            <div class="metric-label">Receita Anual</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 8. Fontes e Refer√™ncias Acad√™micas (SE√á√ÉO FINAL) -->
        <section class="sources-section section" id="sources">
            <div class="container">
                <h2 class="section-title">üìö Fontes &amp; Refer√™ncias Acad√™micas</h2>
                <p class="text-center section-description" style="font-size: 1.2rem; max-width: 800px; margin: 0 auto 2rem;">Todas as fontes consultadas para este estudo de caso, organizadas por relev√¢ncia e data de publica√ß√£o. Esta √© a se√ß√£o final da jornada!</p>
                
                <div class="sources-filters">
                    <button class="filter-btn active" onclick="filterSources('all', event)" aria-pressed="true">Todas (+5 XP)</button>
                    <button class="filter-btn" onclick="filterSources('primary', event)" aria-pressed="false">Prim√°rias (+5 XP)</button>
                    <button class="filter-btn" onclick="filterSources('secondary', event)" aria-pressed="false">Secund√°rias (+5 XP)</button>
                    <button class="filter-btn" onclick="filterSources('recent', event)" aria-pressed="false">Recentes (+5 XP)</button>
                </div>
                
                <div class="sources-grid" id="sourcesGrid">
                    <!-- Sources ser√£o gerados pelo JavaScript -->
                </div>
                
                <div style="text-align: center; margin-top: 3rem; padding: 2rem; background: linear-gradient(135deg, var(--duolingo-green), var(--duolingo-light-green)); border-radius: var(--radius-lg);">
                    <h3 style="margin-bottom: 1rem; color: white !important;">üéâ Parab√©ns por Completar a Jornada!</h3>
                    <p style="color: white !important;">Voc√™ explorou todo o processo de discovery do Duolingo usando a metodologia Double Diamond. Esperamos que tenha sido uma experi√™ncia enriquecedora!</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Rodap√© com Cr√©ditos -->
    <footer class="app-footer">
        <div class="footer-content">
            <p class="footer-line">
                Made with ‚ù§Ô∏è by <strong>Cristiana, Gabi, Gabriel and Teresa</strong>
            </p>
            <p class="footer-line">
                Powered with ü§ñ by <strong>Perplexity and Claude</strong>
            </p>
        </div>
    </footer>


    <!-- Bot√£o Voltar ao Topo -->
    <button class="back-to-top" id="backToTop" title="Voltar ao topo">
        ‚Üë
    </button>

    <!-- Modal de Conquista 100% -->
    <div id="victory-modal" class="victory-modal">
        <div class="victory-overlay"></div>
        <div class="victory-content">
            <div class="confetti-container"></div>
            <div class="victory-icon">üéâ</div>
            <h1 class="victory-title">PARAB√âNS!</h1>
            <p class="victory-message">
                Voc√™ completou 100% da jornada de Product Discovery do Duolingo!
                <br><br>
                üèÜ <strong>237 XP</strong> conquistados!
                <br><br>
                Voc√™ explorou o Double Diamond, todas as fases, prot√≥tipos, competidores e fontes.
                Agora voc√™ √© um expert na hist√≥ria do Duolingo! ü¶âüíö
            </p>
            <button class="victory-button" onclick="closeVictoryModal()">
                üéä INCR√çVEL! üéä
            </button>
        </div>
    </div>

    <script>
        // ===== DADOS DA APLICA√á√ÉO =====
        const timelineData = [
            {
                year: "2009",
                phase: "Discover",
                event: "Idea√ß√£o Inicial",
                description: "Luis Von Ahn e Severin Hacker formulam a ideia do Duolingo",
                details: "Ap√≥s o sucesso do reCAPTCHA (vendido ao Google por valores n√£o divulgados), Luis Von Ahn buscava seu pr√≥ximo projeto de impacto social. Em visita √† Guatemala, percebeu que aprender ingl√™s custava mais que a mensalidade universit√°ria. Severin Hacker, seu aluno de doutorado em Carnegie Mellon, compartilhava a vis√£o de que tecnologia poderia democratizar educa√ß√£o. Juntos, come√ßaram a explorar como crowdsourcing poderia tornar educa√ß√£o gratuita e acess√≠vel globalmente."
            },
            {
                year: "2010-2011",
                phase: "Define",
                event: "Defini√ß√£o do Problema",
                description: "Defini√ß√£o clara do desafio e miss√£o",
                details: "Per√≠odo de intensa pesquisa de mercado e defini√ß√£o de escopo. An√°lise de concorrentes como Rosetta Stone (modelo premium caro) e Babbel (freemium limitado). Decis√£o estrat√©gica: foco em ingl√™s para falantes n√£o-nativos, o maior mercado global. Estabelecimento da miss√£o: 'Desenvolver a melhor educa√ß√£o do mundo e torn√°-la universalmente acess√≠vel'. Valida√ß√£o inicial com usu√°rios beta em Carnegie Mellon."
            },
            {
                year: "2011",
                phase: "Develop",
                event: "Primeiros Prot√≥tipos",
                description: "Descoberta do problema de engajamento",
                details: "Von Ahn desenvolveu curso de espanhol, Hacker desenvolveu curso de alem√£o. Formato: li√ß√µes de 30 minutos seguindo pedagogia tradicional. Teste crucial: eles mesmos tentaram usar os cursos. Resultado devastador - nem conseguiam completar uma semana. Insight transformador: conte√∫do educacional de qualidade n√£o √© suficiente. Necessidade absoluta de mec√¢nicas de engajamento e motiva√ß√£o cont√≠nua."
            },
            {
                year: "2011-2012",
                phase: "Develop",
                event: "Modelo de Tradu√ß√£o Crowdsourced",
                description: "Primeira tentativa de modelo escal√°vel",
                details: "Piv√¥ para modelo de tradu√ß√£o: usu√°rios aprenderiam traduzindo conte√∫do web real (Wikipedia, artigos da CNN). L√≥gica: falantes de espanhol traduziriam para ingl√™s enquanto aprendiam, gerando receita B2B. Problemas encontrados: complexidade para usu√°rios iniciantes, poucos clientes corporativos interessados, dificuldade de escalar. Conclus√£o: simplicidade √© essencial para ado√ß√£o massiva de produto educacional."
            },
            {
                year: "2012",
                phase: "Develop",
                event: "Cria√ß√£o do App Mobile",
                description: "Piv√¥ revolucion√°rio para mobile-first",
                details: "Momento decisivo: Tyler Murphy e David Klionsky (estagi√°rios de ver√£o) desenvolveram prot√≥tipo mobile de flashcards como projeto paralelo. Inspira√ß√£o: Instagram como experi√™ncia mobile-first completa. Teste interno revelou: engajamento 3x maior no app vs site. Decis√£o revolucion√°ria: pivotar para mobile como produto principal. Defini√ß√£o do core: skill tree visual desbloque√°vel, inspirado em jogos como Candy Crush e World of Warcraft."
            },
            {
                year: "2012 - Junho",
                phase: "Deliver",
                event: "Beta Privado",
                description: "Lan√ßamento com lista de espera",
                details: "Lan√ßamento beta privado em junho com 125.000 pessoas na lista de espera. Teste intensivo de 6 idiomas: ingl√™s, espanhol, franc√™s, alem√£o, portugu√™s e italiano. M√©tricas monitoradas: DAU, reten√ß√£o D7 e D30, tempo m√©dio de sess√£o. Feedback crucial dos early adopters sobre gamifica√ß√£o. Itera√ß√µes r√°pidas baseadas em dados quantitativos e qualitativos. Modelo freemium ainda focado em tradu√ß√£o como monetiza√ß√£o."
            },
            {
                year: "2012 - Novembro",
                phase: "Deliver",
                event: "Lan√ßamento P√∫blico",
                description: "Abertura total e apresenta√ß√£o no TechCrunch",
                details: "Lan√ßamento p√∫blico em novembro. Apresenta√ß√£o no TechCrunch Disrupt gera buzz massivo. Mais de 300.000 pessoas na lista de espera. Promessa clara: educa√ß√£o 100% gratuita, sem an√∫ncios, sem taxas ocultas. Primeiros sinais de viralidade org√¢nica. Abandono gradual do modelo de tradu√ß√£o crowdsourced em favor de crescimento de base de usu√°rios. Foco total em engajamento e reten√ß√£o atrav√©s de gamifica√ß√£o."
            }
        ];

        const diamondPhases = {
            discover: {
                title: "Descobrir",
                description: "Entendimento do problema atrav√©s de pesquisa e insights. Crowdsourcing foi identificado desde reCAPTCHA. Highlight insight socioecon√¥mico e o desejo de democratizar educa√ß√£o.",
                icon: "üîç",
                activities: [
                    "Observa√ß√£o das barreiras econ√¥micas no aprendizado de idiomas",
                    "Experi√™ncia pessoal dos fundadores com custo de testes de profici√™ncia",
                    "Pesquisa sobre o mercado de educa√ß√£o digital emergente",
                    "An√°lise de concorrentes existentes como Rosetta Stone"
                ],
                outcomes: "Identifica√ß√£o da necessidade de democratizar acesso √† educa√ß√£o de idiomas",
                detailedContent: "Luis Von Ahn, motivado pelo alto custo da educa√ß√£o e apoiado em crowdsourcing (CAPTCHA, reCAPTCHA), observou a dificuldade de acesso ao aprendizado de idiomas em pa√≠ses como Guatemala. A equipe conectou esse insight ao potencial de tecnologia e comunidade para democratizar educa√ß√£o global. Esta fase foi fundamental para entender que o problema n√£o era apenas t√©cnico, mas social e econ√¥mico, estabelecendo as bases para uma solu√ß√£o verdadeiramente disruptiva."
            },
            define: {
                title: "Definir",
                description: "Miss√£o clara: criar educa√ß√£o gratuita e acess√≠vel. Problema sintetizado atrav√©s de user research, benchmarks de concorrentes (Rosetta Stone, Babbel) e experimentos de MVP.",
                icon: "üéØ",
                activities: [
                    "Defini√ß√£o da miss√£o: desenvolver a melhor educa√ß√£o do mundo",
                    "Estabelecimento do modelo gratuito como diferencial",
                    "Foco inicial em ensino de ingl√™s para falantes n√£o-nativos",
                    "Decis√£o de usar tecnologia para escalar educa√ß√£o"
                ],
                outcomes: "Problema claramente definido: criar educa√ß√£o gratuita e acess√≠vel",
                detailedContent: "A equipe definiu como problema central as barreiras econ√¥micas e criou o conceito de app gratuito. Inspirou-se em concorrentes pagos e usou experimenta√ß√£o r√°pida para validar que ensino de ingl√™s era a principal necessidade dos usu√°rios. O roadmap foi orientado por insights de mercado e testes com usu√°rios, estabelecendo que a democratiza√ß√£o da educa√ß√£o seria o diferencial competitivo principal."
            },
            develop: {
                title: "Desenvolver",
                description: "Idea√ß√£o e prototipa√ß√£o de m√∫ltiplas solu√ß√µes. Evolu√ß√£o dos prot√≥tipos: li√ß√µes longas, crowdsourcing, flashcards e pivot mobile. Estrutura organizacional: times multidisciplinares, design review e OKR.",
                icon: "üí°",
                activities: [
                    "Primeira tentativa: li√ß√µes tradicionais de 30 minutos",
                    "Descoberta do problema de engajamento atrav√©s de auto-teste",
                    "Itera√ß√£o para modelo de tradu√ß√£o crowdsourced",
                    "Desenvolvimento de app mobile como produto principal",
                    "Adi√ß√£o de elementos de gamifica√ß√£o para engajamento"
                ],
                outcomes: "App mobile gamificado com skill tree como experi√™ncia core",
                detailedContent: "Prot√≥tipo inicial falhou por falta de engajamento, levando √† inser√ß√£o de gamifica√ß√£o e prototipa√ß√£o mobile por estagi√°rios inspirados no Instagram. Time multidisciplinar (design, engenharia, ci√™ncia da aprendizagem) iterou em ciclos curtos, com reviews colaborativos e m√©tricas de engajamento e reten√ß√£o. Modelo OKR trimestral foi implementado para alinhar objetivos e medir progresso de forma sistem√°tica."
            },
            deliver: {
                title: "Entregar",
                description: "Implementa√ß√£o e lan√ßamento p√∫blico. Beta privado, apresenta√ß√£o em eventos, an√°lise rigorosa de m√©tricas. MVP gradualmente convertido para produto completo mobile, piv√¥ de modelo de neg√≥cios.",
                icon: "üöÄ",
                activities: [
                    "Lan√ßamento de beta privado com lista de espera",
                    "Apresenta√ß√£o no TechCrunch Disrupt",
                    "Lan√ßamento p√∫blico com 6 idiomas",
                    "Monitoramento de m√©tricas de engajamento",
                    "Itera√ß√£o cont√≠nua baseada em feedback"
                ],
                outcomes: "Plataforma estabelecida com base de usu√°rios crescente",
                detailedContent: "Lan√ßamento com lista de espera e testes de engajamento. Beta privado para captar feedback do usu√°rio real, TechCrunch Disrupt para valida√ß√£o externa. Abandono do modelo de tradu√ß√£o crowdsourced e foco no crescimento org√¢nico e produto gamificado. Itera√ß√£o cont√≠nua baseada em dados de usu√°rio real, estabelecendo o produto como refer√™ncia no mercado."
            }
        };

        const prototypes = [
            {
                name: "Prot√≥tipo 1 - Li√ß√µes Tradicionais",
                year: "2011",
                description: "Li√ß√µes de 30 minutos sem elementos l√∫dicos",
                result: "failure",
                resultText: "Falha - nem os pr√≥prios fundadores conseguiam manter engajamento",
                learning: "Conte√∫do de qualidade n√£o basta - necess√°rio engajamento ativo",
                details: "Luis Von Ahn criou curso de espanhol, Severin Hacker criou curso de alem√£o. Li√ß√µes de 30 minutos sem elementos l√∫dicos. Problema descoberto: nem os pr√≥prios fundadores conseguiam manter o h√°bito de estudo. Este fracasso inicial foi crucial - revelou que conte√∫do educacional de qualidade n√£o basta sem engajamento. Insight: necessidade de mec√¢nicas motivacionais."
            },
            {
                name: "Prot√≥tipo 2 - Tradu√ß√£o Crowdsourced",
                year: "2011-2012",
                description: "Usu√°rios aprendem traduzindo conte√∫do web real",
                result: "partial",
                resultText: "Parcialmente eficaz mas n√£o escal√°vel",
                learning: "Simplicidade √© essencial para ado√ß√£o em massa",
                details: "Modelo inovador: usu√°rios aprenderiam traduzindo conte√∫do web real (Wikipedia, CNN). Falantes de espanhol traduziriam para ingl√™s enquanto aprendiam. Problema: modelo muito complexo, poucos clientes B2B interessados, n√£o escal√°vel. Aprendizado: simplicidade √© essencial para ado√ß√£o em massa."
            },
            {
                name: "Prot√≥tipo 3 - App de Flashcards",
                year: "2012",
                description: "App complementar simples para pr√°tica de vocabul√°rio",
                result: "success",
                resultText: "Evoluiu para produto principal",
                learning: "Mobile-first approach foi fundamental para o sucesso",
                details: "Dois estagi√°rios (Tyler Murphy e David Klionsky) criaram prot√≥tipo mobile como projeto de ver√£o. Inicialmente pensado como complemento, inspirado no Instagram como experi√™ncia mobile-first completa. Insight revolucion√°rio: o mobile deveria ser o produto principal, n√£o o site. Define experi√™ncia core: skill tree desbloque√°vel."
            },
            {
                name: "Prot√≥tipo 4 - App Gamificado",
                year: "2012",
                description: "Skill tree desbloque√°vel com elementos de jogo",
                result: "success",
                resultText: "Sucesso - base para o produto atual",
                learning: "Gamifica√ß√£o √© essencial para reten√ß√£o de usu√°rios",
                details: "Combina√ß√£o de elementos de jogo: streaks, XP, n√≠veis, leaderboards. Skill tree visual inspirado em jogos como Candy Crush. Resultado: engajamento disparou. Usu√°rios retornavam diariamente. Valida√ß√£o do modelo: gamifica√ß√£o n√£o √© superficial, √© essencial para reten√ß√£o. Base do produto bilion√°rio atual."
            }
        ];

        const competitorsData = {
            rosetta_stone: {
                name: "Rosetta Stone",
                iconUrl: "https://images.freeimages.com/fic/images/icons/2804/plex/512/rosetta_stone.png?fmt=webp&h=350",
                founded: 1992,
                description: "L√≠der estabelecido em software de aprendizado de idiomas",
                model: "Premium pago",
                badge_color: "#FFC800",
                details: "L√≠der estabelecido desde 1992 com m√©todo de imers√£o sem tradu√ß√£o. Em 2011: receita de $273M, a√ß√µes ca√≠ram 46% devido a apps gratuitos. 174 quiosques f√≠sicos em 28 estados. Pre√ßo: $500 por idioma. P√∫blico: corporativo e institucional (56% educa√ß√£o).",
                metrics_2011: {
                    revenue: "$273 milh√µes",
                    employees: "~800",
                    active_users: "154.000 (SharedTalk)",
                    kiosks: "174 quiosques",
                    market_share: "L√≠der absoluto",
                    pricing: "$500/idioma"
                }
            },
            babbel: {
                name: "Babbel",
                iconUrl: "https://pbs.twimg.com/profile_images/1808222584997134336/qLdrnBWv_400x400.png",
                founded: 2007,
                description: "App premium alem√£o focado em conversa√ß√£o pr√°tica",
                model: "Freemium/Premium",
                badge_color: "#4CAF00",
                details: "Fundado em 2007 na Alemanha, focado em conversa√ß√£o pr√°tica. Lan√ßou vers√£o paga em 2009. Em 2011: modelo freemium inicial, equipe pequena, preparando expans√£o US. Metodologia: li√ß√µes estruturadas 10-15min com gram√°tica contextual. 14 idiomas dispon√≠veis.",
                metrics_2011: {
                    founded: "Agosto 2007 (Berlim)",
                    employees: "~50-100",
                    pricing: "$6-13/m√™s",
                    languages: "14 idiomas",
                    strategy: "Li√ß√µes curtas estruturadas",
                    funding: "Bootstrapped"
                }
            },
            busuu: {
                name: "Busuu",
                iconUrl: "https://play-lh.googleusercontent.com/Egp-GTOp0CMBeS6eRVEQO6bLYdfklzGxCYSkr7aZynbzr2AJSZpF9s05_6ppj8vwq7I",
                founded: 2008,
                description: "Plataforma brit√¢nica com intera√ß√£o entre nativos",
                model: "Freemium",
                badge_color: "#4CAF00",
                details: "Plataforma brit√¢nica fundada em 2008 com diferencial √∫nico: feedback de falantes nativos. Em 2011: crescimento org√¢nico, comunidade social forte. Modelo freemium com exerc√≠cios revisados por nativos. Integra√ß√£o com McGraw-Hill. Foco: aprendizado colaborativo peer-to-peer.",
                metrics_2011: {
                    founded: "2008 (Londres)",
                    users: "~5-10 milh√µes",
                    model: "Freemium + Premium",
                    differentiator: "Corre√ß√£o por nativos",
                    community: "Rede social de idiomas",
                    partnership: "McGraw-Hill"
                }
            },
            memrise: {
                name: "Memrise",
                iconUrl: "https://upload.wikimedia.org/wikipedia/en/3/39/Memrise-new-logo.png",
                founded: 2010,
                description: "Plataforma baseada em flashcards com repeti√ß√£o espa√ßada",
                model: "Freemium",
                badge_color: "#4CAF00",
                details: "Fundado em 2010 por Ed Cooke e Greg Detre (neurocientista Princeton). Baseado em ci√™ncia cognitiva e repeti√ß√£o espa√ßada. Em 2011: in√≠cio de opera√ß√µes, foco em memoriza√ß√£o cient√≠fica, gamifica√ß√£o atrav√©s de 'mems' visuais criativos. Modelo freemium desde launch.",
                metrics_2011: {
                    founded: "2010 (Londres)",
                    founders: "Ed Cooke + Greg Detre (PhD)",
                    users: "<1 milh√£o (fase inicial)",
                    model: "Freemium",
                    technology: "Repeti√ß√£o espa√ßada + mnem√¥nicos",
                    differentiator: "Base cient√≠fica cognitiva"
                }
            }
        };

        const sourcesData = [
    // FONTES PRIM√ÅRIAS (3)
    {
        title: "How a bot-fighting test turned into edtech's most iconic app",
        link: "https://techcrunch.com/2021/05/03/duolingo-ec1-origin/",
        date: "2021-05-03",
        description: "Fonte prim√°ria com entrevistas diretas dos fundadores Luis von Ahn e Severin Hacker",
        category: "primary",
        type: "Prim√°ria"
    },
    {
        title: "How Duolingo builds product",
        link: "https://www.lennysnewsletter.com/p/how-duolingo-builds-product",
        date: "2023-03-20",
        description: "Case study oficial sobre estrutura de produto e metodologias de desenvolvimento",
        category: "primary",
        type: "Prim√°ria"
    },
    {
        title: "Luis von Ahn: How I Built Duolingo",
        link: "https://ecorner.stanford.edu/videos/how-i-built-duolingo/",
        date: "2020-11-15",
        description: "Palestra do fundador na Stanford sobre a jornada de cria√ß√£o do Duolingo",
        category: "primary",
        type: "Prim√°ria"
    },
    
    // FONTES SECUND√ÅRIAS (5)
    {
        title: "How Duolingo reignited user growth",
        link: "https://www.lennysnewsletter.com/p/how-duolingo-reignited-user-growth",
        date: "2023-02-27",
        description: "An√°lise profunda de estrat√©gias de growth e reten√ß√£o de usu√°rios",
        category: "secondary",
        type: "Secund√°ria"
    },
    {
        title: "Game of Tongues: How Duolingo Built a $700M Business",
        link: "https://www.forbes.com/sites/susanadams/2019/07/16/",
        date: "2019-07-16",
        description: "Reportagem sobre modelo de neg√≥cio e estrat√©gia de monetiza√ß√£o",
        category: "secondary",
        type: "Secund√°ria"
    },
    {
        title: "User Experience Research in EdTech",
        link: "https://uxplanet.org/ux-research-edtech-2024/",
        date: "2024-09-10",
        description: "Tend√™ncias de UX Research aplicadas ao setor de tecnologia educacional",
        category: "secondary",
        type: "Secund√°ria"
    },
    {
        title: "Duolingo's Secret to Success: Data-Driven Design",
        link: "https://www.productmanagement.com/duolingo-data-driven-design/",
        date: "2022-06-20",
        description: "An√°lise de como Duolingo usa dados para decis√µes de produto",
        category: "secondary",
        type: "Secund√°ria"
    },
    {
        title: "From Classroom to App: The EdTech Revolution",
        link: "https://www.technologyreview.com/2023/03/15/edtech-revolution/",
        date: "2023-03-15",
        description: "Contexto da revolu√ß√£o EdTech e o papel do Duolingo no mercado",
        category: "secondary",
        type: "Secund√°ria"
    },
    
    // FONTES RECENTES (4)
    {
        title: "What is Double Diamond Design Process?",
        link: "https://www.uxpin.com/studio/blog/double-diamond-design-process/",
        date: "2024-10-06",
        description: "Guia completo e atualizado sobre a metodologia Double Diamond",
        category: "recent",
        type: "Recente"
    },
    {
        title: "Duolingo case discovery notes",
        link: "https://claude.ai/share/6fe83934-eb46-4631-8b1b-fddd7d4e4e00",
        date: "2024-10-19",
        description: "Documento colaborativo de pesquisa e an√°lise do case",
        category: "recent",
        type: "Recente"
    },
    {
        title: "Double Diamond methodology case studies",
        link: "https://design-council.org.uk/double-diamond-cases/",
        date: "2024-08-15",
        description: "Casos reais de aplica√ß√£o do Double Diamond em diferentes contextos",
        category: "recent",
        type: "Recente"
    },
    {
        title: "Design Thinking in Product Management 2025",
        link: "https://www.nngroup.com/articles/design-thinking-product-management-2025/",
        date: "2024-11-01",
        description: "Tend√™ncias e melhores pr√°ticas de Design Thinking para 2025",
        category: "recent",
        type: "Recente"
    }
];


        // ===== SISTEMA DE XP - CONTROLE DE DUPLICA√á√ÉO =====
        let currentXP = 0;
        const maxXP = 237; // TOTAL ATUALIZADO: 237 XP (193 + 40 Double Diamond)
        let activeToasts = [];
        
        // Controle de XP ganho - cada a√ß√£o s√≥ pode dar XP uma vez
        const xpEarned = {
    firstClick: false,
    ddIntro: {discover: false, define: false, develop: false, deliver: false},
    phases: {discover: false, define: false, develop: false, deliver: false},
    timeline: {0: false, 1: false, 2: false, 3: false, 4: false, 5: false, 6: false},
    prototypes: {0: false, 1: false, 2: false, 3: false},
    competitors: {rosetta_stone: false, babbel: false, busuu: false, memrise: false},
    filters: {all: false, primary: false, secondary: false, recent: false},
    sources: {0: false, 1: false, 2: false, 3: false, 4: false, 5: false, 6: false, 7: false, 8: false, 9: false, 10: false, 11: false} // ATUALIZADO para 12 fontes
};


        // Fun√ß√£o para dar XP com verifica√ß√£o de duplica√ß√£o
        function awardXP(category, item, xpAmount, message) {
            // Verificar se j√° ganhou XP desta a√ß√£o
            if (category && item !== undefined && xpEarned[category] && xpEarned[category][item]) {
                return; // J√° ganhou, n√£o dar XP novamente
            }
            
            // Marcar como ganho
            if (category && item !== undefined && xpEarned[category]) {
                xpEarned[category][item] = true;
            } else if (category === 'firstClick') {
                xpEarned.firstClick = true;
            }
            
            // Adicionar XP
            currentXP += xpAmount;
            currentXP = Math.min(currentXP, maxXP); 
            
            // Atualizar display
            updateXPDisplay();
            
            // Mostrar toast
            showToast(xpAmount, message);
            
            // Verificar 100% completion
            if (currentXP >= maxXP) {
                setTimeout(() => {
                    showVictoryModal();
                }, 1000);
            }
        }

        // ===== SISTEMA DE TEMA - CORRIGIDO =====
        let currentTheme = 'light';
        
        function initThemeSystem() {
            document.documentElement.setAttribute('data-theme', currentTheme);
            
            const themeToggle = document.getElementById('theme-toggle');
            
            if(themeToggle) {
                themeToggle.addEventListener('click', toggleTheme);
            }

            updateThemeIcon(currentTheme);
        }
        
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
            updateThemeIcon(currentTheme);
        }
        
        function updateThemeIcon(theme) {
            const themeIcon = document.getElementById('theme-icon');
            if(themeIcon) {
                themeIcon.textContent = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';
            }
        }
        
        // ===== TOAST MANAGER MELHORADO =====
        class ToastManager {
            constructor() {
                this.toasts = [];
                this.toastHeight = 100;
                this.initialTop = 80;
            }
            
            addToast(xp, message) {
                const toastId = `toast-${Date.now()}`;
                const position = this.initialTop + (this.toasts.length * this.toastHeight);
                
                const toast = this.createToast(toastId, xp, message, position);
                this.toasts.push({ id: toastId, element: toast });
                
                setTimeout(() => this.removeToast(toastId), 3000);
            }
            
            createToast(id, xp, message, top) {
                const toast = document.createElement('div');
                toast.id = id;
                toast.className = 'toast-notification';
                toast.style.top = `${top}px`;
                
                const icon = this.getIcon(xp, message);
                
                toast.innerHTML = `
                    <div class="toast-icon">${icon}</div>
                    <div class="toast-content">
                        <div class="toast-title">${xp > 0 ? `+${xp} XP` : message.split('!')[0] + '!'}</div>
                        <div class="toast-message">${xp > 0 ? message : 'Jornada 100% completa!'}</div>
                    </div>
                    <div class="toast-progress-bar">
                        <div class="toast-progress-fill"></div>
                    </div>
                `;
                
                document.body.appendChild(toast);
                
                requestAnimationFrame(() => {
                    toast.classList.add('show');
                });
                
                return toast;
            }
            
            removeToast(id) {
                const index = this.toasts.findIndex(t => t.id === id);
                if (index === -1) return;
                
                const toast = this.toasts[index];
                toast.element.classList.remove('show');
                toast.element.classList.add('hide');
                
                setTimeout(() => {
                    if (toast.element.parentNode) {
                        toast.element.parentNode.removeChild(toast.element);
                    }
                    this.toasts.splice(index, 1);
                    this.repositionToasts();
                }, 300);
            }
            
            repositionToasts() {
                this.toasts.forEach((toast, index) => {
                    const newTop = this.initialTop + (index * this.toastHeight);
                    toast.element.style.top = `${newTop}px`;
                    toast.element.style.transition = 'top 0.3s ease-out';
                });
            }
            
            getIcon(xp, message) {
                if (xp >= 15) return 'üöÄ';
                if (xp >= 10) return 'üèÜ';
                if (xp >= 5) return 'üéØ';
                if (message.includes('Primeiro clique')) return 'üéâ';
                if (message.includes('analisou')) return 'üèÜ';
                if (message.includes('filtrou')) return 'üîç';
                if (message.includes('acessou')) return 'üìö';
                if (message.includes('explorou')) return 'üìÖ';
                return 'üìö';
            }
        }
        
        const toastManager = new ToastManager();
        
        function showToast(xpAmount, message, isSpecial = false) {
            toastManager.addToast(xpAmount, message);
        }
        
        // ===== MODAL DE CONQUISTA =====
        function createConfetti() {
            const colors = ['#58CC02', '#1CB0F6', '#FF4B4B', '#FFC800'];
            const confettiCount = 150;
            const container = document.querySelector('.confetti-container');
            if(!container) return;
            container.innerHTML = '';
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                container.appendChild(confetti);
            }
        }
        
        function showVictoryModal() {
            const modal = document.getElementById('victory-modal');
            if (modal) {
                modal.style.display = 'block';
                createConfetti();
            }
        }
        
        window.closeVictoryModal = function() {
            const modal = document.getElementById('victory-modal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.5s ease-out';
                setTimeout(() => {
                    modal.style.display = 'none';
                    modal.style.animation = '';
                }, 500);
            }
        }
        
        function updateXPDisplay() {
            const xpValue = document.getElementById('xpValue');
            const xpProgress = document.getElementById('xpProgress');
            const xpProgressBar = document.getElementById('xpProgressBar');
            
            if (xpValue) xpValue.textContent = currentXP;
            
            const percentage = Math.min(100, Math.round((currentXP / maxXP) * 100));
            if (xpProgress) xpProgress.textContent = `${percentage}%`;
            
            if (xpProgressBar) {
                xpProgressBar.style.width = `${percentage}%`;
            }
            
            if (xpValue) {
                xpValue.style.transform = 'scale(1.2)';
                xpValue.style.color = '#58CC02';
                setTimeout(() => {
                    xpValue.style.transform = 'scale(1)';
                    xpValue.style.color = 'inherit';
                }, 200);
            }
        }

        // ===== GERA√á√ÉO DE CONTE√öDO E HANDLERS =====
        
        window.toggleTimelineDetails = function(button, index) {
            const details = document.getElementById(`timeline-details-${index}`);
            const isVisible = !details.classList.contains('hidden');
            
            if (isVisible) {
                details.classList.add('hidden');
                button.innerHTML = 'üìö MAIS DETALHES (+5 XP)';
            } else {
                details.classList.remove('hidden');
                button.innerHTML = 'üìã MENOS DETALHES';
                
                if (!xpEarned.timeline[index]) {
                    const eventName = timelineData[index].event;
                    awardXP('timeline', index, 5, `üìÖ +5 XP - Evento ${eventName} analisado!`);
                }
            }
        }

        function generateTimeline() {
            const container = document.getElementById('timelineContainer');
            if(!container) return;
            
            timelineData.forEach((item, index) => {
                const timelineItem = document.createElement('div');
                timelineItem.className = 'timeline-item';
                timelineItem.style.animationDelay = `${index * 0.2}s`;
                
                const textLength = item.year.length;
                let circleSize = textLength > 8 ? '120px' : textLength > 5 ? '100px' : '80px';
                let fontSize = textLength > 8 ? '0.9rem' : '1.1rem';
                
                timelineItem.innerHTML = `
                    <div class="timeline-year" style="width: ${circleSize}; height: ${circleSize}; font-size: ${fontSize};">${item.year}</div>
                    <div class="timeline-content">
                        <div class="phase-badge phase-${item.phase.toLowerCase()}">${item.phase}</div>
                        <h3 style="margin-bottom: 1rem; font-size: 1.4rem; font-weight: 700;">${item.event}</h3>
                        <p class="section-description" style="margin-bottom: 1rem;">${item.description}</p>
                        
                        <button class="btn btn--primary" onclick="toggleTimelineDetails(this, ${index})" style="margin-top: 1rem;">
                            üìö MAIS DETALHES (+5 XP)
                        </button>
                        
                        <div class="timeline-details hidden" id="timeline-details-${index}">
                            <h4 style="margin-bottom: 1rem; font-size: 1.1rem;">An√°lise Detalhada:</h4>
                            <p style="line-height: 1.6;">${item.details}</p>
                        </div>
                    </div>
                `;
                container.appendChild(timelineItem);
            });
        }

        window.togglePhaseDetails = function(button, key) {
            const content = document.getElementById(`phase-details-${key}`);
            const isVisible = !content.classList.contains('hidden');
            
            if (isVisible) {
                content.classList.add('hidden');
                button.innerHTML = 'üìñ MAIS DETALHES (+5 XP)';
            } else {
                content.classList.remove('hidden');
                button.innerHTML = 'üìö MENOS DETALHES';
                
                if (!xpEarned.phases[key]) {
                    const phaseName = diamondPhases[key].title;
                    awardXP('phases', key, 5, `üéØ +5 XP - Voc√™ explorou a fase ${phaseName}!`);
                }
            }
        }

        function generateDiamondPhases() {
            const container = document.getElementById('phasesGrid');
            if(!container) return;

            const headerColors = {
                discover: '#1CB0F6',
                define: '#58CC02',
                develop: '#FFC800',
                deliver: 'var(--duolingo-purple)'
            };
            
            Object.entries(diamondPhases).forEach(([key, phase]) => {
                const phaseCard = document.createElement('div');
                phaseCard.className = `phase-card phase-${key}`;
                
                phaseCard.innerHTML = `
                    <div class="phase-header" style="background:${headerColors[key]}">
                        <div class="phase-icon">${phase.icon}</div>
                        <h3 class="phase-title" style="${key === 'develop' ? 'color: #2B2B2B !important;' : ''}">${phase.title}</h3>
                    </div>
                    <div class="phase-body">
                        <div style="flex-grow: 1;">
                            <p style="margin-bottom: 1rem;">${phase.description}</p>
                        </div>
                        <button class="btn btn--primary" onclick="togglePhaseDetails(this, '${key}')" style="margin-top: 1rem;">
                            üìñ MAIS DETALHES (+5 XP)
                        </button>
                        
                        <div class="more-details-content hidden" id="phase-details-${key}">
                            <h4 style="margin: 0 0 1rem 0; font-size: 1.1rem;">An√°lise Detalhada:</h4>
                            <p style="margin-bottom: 1.5rem; line-height: 1.6;">${phase.detailedContent}</p>
                            
                            <h4 style="margin: 0 0 0.5rem 0;">Atividades Principais:</h4>
                            <ul style="list-style: none; margin-top: 1rem; padding: 0;">
                                ${phase.activities.map(activity => `<li style="padding: 0.5rem 0; padding-left: 1.5rem; position: relative;"><span style="position: absolute; left: 0; color: var(--duolingo-green); font-weight: bold;">‚úì</span>${activity}</li>`).join('')}
                            </ul>
                            <h4 style="margin: 1rem 0 0.5rem 0;">Resultado:</h4>
                            <p style="font-style: italic;" class="section-description">${phase.outcomes}</p>
                        </div>
                    </div>
                `;
                container.appendChild(phaseCard);
            });
        }

        window.togglePrototypeDetails = function(button, index) {
            const details = document.getElementById(`prototype-details-${index}`);
            const isVisible = !details.classList.contains('hidden');
            
            if (isVisible) {
                details.classList.add('hidden');
                button.innerHTML = 'üîç VER DETALHES COMPLETOS (+15 XP)';
            } else {
                details.classList.remove('hidden');
                button.innerHTML = 'üìö OCULTAR DETALHES';
                
                if (!xpEarned.prototypes[index]) {
                    awardXP('prototypes', index, 15, `üöÄ +15 XP - Prot√≥tipo ${index + 1} analisado com sucesso!`);
                }
            }
        }

        function generatePrototypes() {
            const container = document.getElementById('prototypesGrid');
            if(!container) return;
            
            prototypes.forEach((prototype, index) => {
                const prototypeCard = document.createElement('div');
                prototypeCard.className = 'prototype-card';
                
                const resultBgColor = {
                    'success': 'var(--duolingo-green)',
                    'failure': 'var(--duolingo-red)', 
                    'partial': 'var(--duolingo-yellow)'
                }[prototype.result] || 'var(--duolingo-yellow)';
                 const resultTextColor = prototype.result === 'partial' ? 'var(--text-primary)' : 'white';
                
                prototypeCard.innerHTML = `
                    <div style="background: linear-gradient(135deg, var(--duolingo-text-success), var(--duolingo-text-link)); color: white; padding: 1.5rem; text-align: center;">
                        <div style="font-size: 2rem; font-weight: 800; margin-bottom: 0.5rem; color: white !important;">#${index + 1}</div>
                        <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 0.5rem; color: white !important;">${prototype.year}</div>
                    </div>
                    <div style="padding: 2rem; flex-grow: 1; display: flex; flex-direction: column;">
                        <div style="flex-grow: 1;">
                            <h3 style="margin-bottom: 1rem; font-size: 1.3rem; font-weight: 700; text-align: center;">${prototype.name}</h3>
                            <p class="section-description" style="margin-bottom: 1rem;">${prototype.description}</p>
                            <div style="background: ${resultBgColor}; color: ${resultTextColor} !important; padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; margin: 1rem 0; display: inline-block;">${prototype.resultText}</div>
                            <p style="margin-top: 1rem; font-style: italic;"><strong style="font-weight: bold;">Aprendizado:</strong> ${prototype.learning}</p>
                        </div>
                        <button class="btn btn--primary" onclick="togglePrototypeDetails(this, ${index})" style="margin-top: 1rem; width: 100%;">
                            üîç VER DETALHES COMPLETOS (+15 XP)
                        </button>
                        
                        <div class="prototype-expanded hidden" id="prototype-details-${index}">
                            <h4 style="margin-bottom: 1rem;">An√°lise Detalhada:</h4>
                            <p style="line-height: 1.6;">${prototype.details}</p>
                        </div>
                    </div>
                `;
                container.appendChild(prototypeCard);
            });
        }

        window.toggleCompetitorDetails = function(competitorKey) {
            const details = document.getElementById(`competitor-details-${competitorKey}`);
            const isVisible = !details.classList.contains('hidden');
            
            if (isVisible) {
                details.classList.add('hidden');
            } else {
                details.classList.remove('hidden');
                
                if (!xpEarned.competitors[competitorKey]) {
                    const competitorName = competitorsData[competitorKey].name;
                    awardXP('competitors', competitorKey, 10, `üèÜ +10 XP - Voc√™ analisou ${competitorName}!`);
                }
            }
        }

        function generateCompetitors() {
            const container = document.getElementById('competitorsGrid');
            if(!container) return;
            
            Object.entries(competitorsData).forEach(([key, competitor]) => {
                const competitorCard = document.createElement('div');
                competitorCard.className = 'competitor-card';
                const badgeTextColor = competitor.model === "Premium pago" ? 'var(--text-primary)' : 'white';
                
                competitorCard.innerHTML = `
                    <div style="flex-grow: 1;">
                        <img src="${competitor.iconUrl}" alt="Logo do ${competitor.name}" class="competitor-icon">
                        <h3 style="margin-bottom: 0.5rem; font-size: 1.3rem; font-weight: 700;">${competitor.name}</h3>
                        <div class="section-description" style="font-size: 0.9rem; margin-bottom: 1rem;">Fundado em ${competitor.founded}</div>
                        <p class="section-description" style="margin-bottom: 1rem;">${competitor.description}</p>
                        <div style="background: ${competitor.badge_color}; color: ${badgeTextColor} !important; padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; margin-top: 1rem; display: inline-block;">${competitor.model}</div>
                    </div>
                    <button class="btn btn--primary" onclick="toggleCompetitorDetails('${key}')" style="margin-top: 1.5rem; width: 100%;">
                        üéØ VEJA OS DIFERENCIAIS (+10 XP)
                    </button>
                    
                    <div class="competitor-expanded hidden" id="competitor-details-${key}">
                        <h4 style="margin-bottom: 1rem; font-size: 1.1rem;">üìä Diferenciais e M√©tricas (2011)</h4>
                        
                        <p style="line-height: 1.6; margin-bottom: 1.5rem; font-size: 0.95rem;">${competitor.details}</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem;">
                            ${Object.entries(competitor.metrics_2011).map(([key, value]) => {
                                const icons = {
                                    revenue: 'üí∞', employees: 'üë•', active_users: 'üë•', users: 'üë•',
                                    kiosks: 'üè™', market_share: 'üìä', pricing: 'üí≤',
                                    founded: 'üè¢', languages: 'üåç', strategy: 'üéØ',
                                    funding: 'üíº', model: 'üìà', differentiator: '‚≠ê',
                                    community: 'üë•', partnership: 'ü§ù', technology: 'üî¨',
                                    founders: 'üë®‚Äçüíº'
                                };
                                const icon = icons[key] || 'üìà';
                                return `
                                    <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; text-align: center; border: 2px solid var(--border-color);">
                                        <div style="font-size: 1.2rem; margin-bottom: 0.5rem;">${icon}</div>
                                        <div style="font-weight: 600; font-size: 0.85rem; margin-bottom: 0.3rem;">${value}</div>
                                        <div class="section-description" style="font-size: 0.7rem; text-transform: capitalize;">${key.replace('_', ' ')}</div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                        
                        <button onclick="toggleCompetitorDetails('${key}')" class="btn" style="background: var(--text-secondary); margin-top: 1rem; width: 100%;">
                            üìö FECHAR DETALHES
                        </button>
                    </div>
                `;
                container.appendChild(competitorCard);
            });
        }

        window.accessSource = function(title, url, index) {
            window.open(url, '_blank');
            if (!xpEarned.sources[index]) {
                awardXP('sources', index, 1, `üìö +1 XP - Fonte acessada!`);
            }
        }
        
        function generateSources() {
            const container = document.getElementById('sourcesGrid');
            if(!container) return;
            
            sourcesData.forEach((source, index) => {
                const sourceCard = document.createElement('div');
                sourceCard.className = `source-card source-${source.category}`;
                sourceCard.setAttribute('data-category', source.category);
                sourceCard.setAttribute('data-date', source.date);
                
                const dateObj = new Date(source.date);
                const isRecent = (new Date() - dateObj) < (730 * 24 * 60 * 60 * 1000); // Less than 2 years
                if (isRecent) {
                    sourceCard.classList.add('source-recent');
                }
                
                sourceCard.innerHTML = `
                    <div style="flex-grow: 1;">
                        <div style="position: absolute; top: 1rem; right: 1rem; background: var(--duolingo-purple); color: white !important; padding: 4px 8px; border-radius: 12px; font-size: 0.7rem; font-weight: 600;">${source.type}</div>
                        <h3 style="margin-bottom: 0.5rem; font-size: 1.2rem; font-weight: 700; text-align: center;">${source.title}</h3>
                        <div style="color: var(--duolingo-text-link); font-weight: 500; word-break: break-word; font-size: 0.9rem; margin: 0.5rem 0;">
                            ${source.link}
                        </div>
                        <div style="background: var(--duolingo-yellow); color: var(--text-primary) !important; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; margin: 1rem 0; display: inline-block;">${formatDate(source.date)}</div>
                        <p class="section-description" style="font-style: italic; margin-top: 1rem;">${source.description}</p>
                    </div>
                    <button onclick="accessSource('${source.title.replace(/'/g, "\\'")}', '${source.link}', ${index})" class="btn btn--primary" style="margin-top: 1rem; width: 100%; justify-content: center;">
                        üîó ACESSAR FONTE (+1 XP)
                    </button>
                `;
                container.appendChild(sourceCard);
            });
        }
        
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('pt-BR', options);
        }

        window.filterSources = function(filter, event) {
            const cards = document.querySelectorAll('.source-card');
            const buttons = document.querySelectorAll('.filter-btn');
            
            buttons.forEach(btn => {
                btn.classList.remove('active');
                btn.setAttribute('aria-pressed', 'false');
            });
            if (event && event.target) {
                 event.target.classList.add('active');
                 event.target.setAttribute('aria-pressed', 'true');
            }
           
            cards.forEach(card => {
                const category = card.getAttribute('data-category');
                const dateObj = new Date(card.getAttribute('data-date'));
const isRecent = (new Date() - dateObj) < (730 * 24 * 60 * 60 * 1000); // Less than 2 years

                let show = false;
                switch(filter) {
                    case 'all': show = true; break;
                    case 'primary': show = category === 'primary'; break;
                    case 'secondary': show = category === 'secondary'; break;
                    case 'recent': show = isRecent; break;
                }
                
                card.style.display = show ? 'flex' : 'none';
            });
            
            if (!xpEarned.filters[filter]) {
                const filterNames = {'all': 'Todas', 'primary': 'Prim√°rias', 'secondary': 'Secund√°rias', 'recent': 'Recentes'};
                awardXP('filters', filter, 5, `üîç +5 XP - Fontes filtradas por ${filterNames[filter]}!`);
            }
        }
        
        window.toggleDDDetails = function(phase) {
            const details = document.getElementById(`dd-${phase}`);
            const isVisible = !details.classList.contains('hidden');
            
            if (isVisible) {
                details.classList.add('hidden');
            } else {
                details.classList.remove('hidden');
                
                if (!xpEarned.ddIntro[phase]) {
                    const phaseNames = {'discover': 'Descobrir', 'define': 'Definir', 'develop': 'Desenvolver', 'deliver': 'Entregar'};
                    awardXP('ddIntro', phase, 10, `üíé +10 XP - Voc√™ aprendeu sobre ${phaseNames[phase]}!`);
                }
            }
        };

        // ===== UTILIT√ÅRIOS =====
        
        function updateReadingProgress() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrollPercentage = (scrollTop / scrollHeight) * 100;
            
            const readingProgress = document.getElementById('reading-progress');
            if (readingProgress) {
                readingProgress.style.width = scrollPercentage + '%';
            }
        }

        // Section Observer for Nav Links
        function setupNavObserver() {
            const sections = document.querySelectorAll('.section');
            const navLinks = document.querySelectorAll('.nav-links a');

            if (navLinks.length === 0 || sections.length === 0) return;

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href').substring(1) === entry.target.id) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, {
                rootMargin: '-140px 0px -40% 0px'
            });

            sections.forEach(section => {
                observer.observe(section);
            });
        }

        function setupMobileMenu() {
            const toggleBtn = document.getElementById('mobile-menu-toggle');
            const navHeader = document.getElementById('secondary-header');
            const navOverlay = document.getElementById('nav-overlay');
            const navLinks = document.querySelectorAll('.nav-links a');
            const body = document.body;

            if (toggleBtn && navHeader && navOverlay) {
                const toggleMenu = () => {
                    const isOpen = navHeader.classList.toggle('open');
                    navOverlay.classList.toggle('open');
                    body.classList.toggle('menu-open');
                    toggleBtn.textContent = isOpen ? '‚úï' : '‚ò∞';
                    toggleBtn.setAttribute('aria-label', isOpen ? 'Fechar menu' : 'Abrir menu');
                };

                toggleBtn.addEventListener('click', toggleMenu);
                navOverlay.addEventListener('click', toggleMenu);

                navLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        if (navHeader.classList.contains('open')) {
                            toggleMenu();
                        }
                    });
                });
            }
        }
        
        function setupBackToTop() {
            const backToTopBtn = document.getElementById('backToTop');
            if(!backToTopBtn) return;
            
            window.addEventListener('scroll', () => {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                if (scrollTop > 300) {
                    backToTopBtn.classList.add('show');
                } else {
                    backToTopBtn.classList.remove('show');
                }
            });
            
            backToTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }
        
        // ===== INICIALIZA√á√ÉO =====
        function initializeApp() {
            initThemeSystem();
            generateTimeline();
            generateDiamondPhases();
            generatePrototypes();
            generateCompetitors();
            generateSources();
            setupBackToTop();
            setupNavObserver();
            setupMobileMenu();
            
            window.addEventListener('scroll', updateReadingProgress);
            
            const firstClickBtn = document.getElementById('firstClickBtn');
            if (firstClickBtn) {
                firstClickBtn.addEventListener('click', function() {
                    if (!xpEarned.firstClick) {
                        awardXP('firstClick', null, 10, 'üéâ +10 XP - Primeiro clique! Bem-vindo √† jornada!');
                        this.disabled = true;
                        this.style.opacity = '0.6';
                        this.innerHTML = '‚úÖ CLIQUE REALIZADO!';
                        this.style.cursor = 'not-allowed';
                    }
                });
            }
            
            updateXPDisplay();
        }
        
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>

